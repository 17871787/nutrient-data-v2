/* UI Improvement #1: Golden Ratio Type Scale */
/* Feature toggle: Add class="beta-typography" to enable */
.beta-typography {
  /* Golden ratio: 1.618 */
  --type-scale-ratio: 1.618;
  --type-base: 1rem;
  
  /* Type scale using golden ratio */
  --type-xs: calc(var(--type-base) / var(--type-scale-ratio));     /* 0.618rem */
  --type-sm: calc(var(--type-xs) * 1.2);                           /* 0.742rem */
  --type-base: 1rem;                                               /* 1rem */
  --type-lg: calc(var(--type-base) * var(--type-scale-ratio));     /* 1.618rem */
  --type-xl: calc(var(--type-lg) * var(--type-scale-ratio));       /* 2.618rem */
  --type-2xl: calc(var(--type-xl) * 1.236);                        /* 3.236rem */
}

.beta-typography h1 {
  font-size: var(--type-2xl);
  font-weight: 700;
  letter-spacing: -0.02em;
  line-height: 1.2;
}

.beta-typography h2 {
  font-size: var(--type-xl);
  font-weight: 600;
  letter-spacing: -0.01em;
  line-height: 1.3;
}

.beta-typography h3 {
  font-size: var(--type-lg);
  font-weight: 600;
  line-height: 1.4;
}

.beta-typography p,
.beta-typography .text-base {
  font-size: var(--type-base);
  line-height: 1.618; /* Golden ratio for optimal readability */
}

.beta-typography .text-sm {
  font-size: var(--type-sm);
  line-height: 1.5;
}

.beta-typography .text-xs {
  font-size: var(--type-xs);
  line-height: 1.5;
}

/* UI Improvement #2: Subtle Text Shadows for Legibility */
/* Feature toggle: Add class="beta-shadows" to enable */
.beta-shadows h1,
.beta-shadows h2,
.beta-shadows h3,
.beta-shadows h4 {
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
}

.beta-shadows .text-white {
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
}

.beta-shadows .text-gray-600,
.beta-shadows .text-gray-700 {
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.02);
}

/* Improved legibility for colored text on colored backgrounds */
.beta-shadows .bg-blue-600 *,
.beta-shadows .bg-green-600 *,
.beta-shadows .bg-red-600 * {
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

/* UI Improvement #3: Enhanced Line Height for Body Text */
/* Feature toggle: const enableEnhancedLineHeight = true in component */
.beta-line-height p {
  line-height: 1.75; /* 1.5x would be 1.5, but 1.75 provides even better readability */
}

.beta-line-height .text-sm {
  line-height: 1.6;
}

.beta-line-height .text-xs {
  line-height: 1.5;
}

.beta-line-height li {
  line-height: 1.7;
  margin-bottom: 0.25rem;
}

.beta-line-height .input-label {
  line-height: 1.5;
  margin-bottom: 0.5rem;
}

/* Paragraph spacing for better readability */
.beta-line-height p + p {
  margin-top: 1.25rem;
}

/* List item spacing */
.beta-line-height ul,
.beta-line-height ol {
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
}

/* Additional refinements when all three features are enabled */
.beta-typography.beta-shadows.beta-line-height {
  /* Optimized reading experience with all improvements */
  font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* UI Improvement #4: Distinct heading styles with weight variations */
@layer base {
  html.beta-heading-styles h1 { @apply font-extrabold text-4xl leading-tight; }
  html.beta-heading-styles h2 { @apply font-bold text-3xl mt-6 mb-2; }
  html.beta-heading-styles h3 { @apply font-semibold text-2xl mt-4 mb-1; }
  html.beta-heading-styles h4 { @apply font-medium text-xl mt-3 mb-1; }
}

/* UI Improvement #5: Letter-spacing for uppercase labels */
@layer base {
  html.beta-letterspace .uc-label { 
    @apply tracking-wide-md;
  }
}

/* UI Improvement #7: Muted color palette for reduced eye strain */
@layer base {
  html.beta-muted {
    --color-gray-900: #1a1a1a;
    --color-gray-800: #2d2d2d;
    --color-gray-700: #404040;
    --color-gray-600: #525252;
    --color-gray-500: #737373;
    --color-gray-400: #a3a3a3;
    --color-gray-300: #d4d4d4;
    --color-gray-200: #e5e5e5;
    --color-gray-100: #f5f5f5;
    --color-gray-50: #fafafa;
    
    /* Muted primary colors */
    --color-blue-600: #4a5d7a;
    --color-blue-500: #5b718f;
    --color-green-600: #4a7a5d;
    --color-green-500: #5b8f71;
    --color-red-600: #7a4a4a;
    --color-red-500: #8f5b5b;
    --color-amber-600: #7a6d4a;
    --color-amber-500: #8f805b;
  }
  
  html.beta-muted .bg-blue-600 { background-color: var(--color-blue-600); }
  html.beta-muted .bg-green-600 { background-color: var(--color-green-600); }
  html.beta-muted .bg-red-600 { background-color: var(--color-red-600); }
  html.beta-muted .bg-amber-600 { background-color: var(--color-amber-600); }
  html.beta-muted .text-blue-600 { color: var(--color-blue-600); }
  html.beta-muted .text-green-600 { color: var(--color-green-600); }
  html.beta-muted .text-red-600 { color: var(--color-red-600); }
  html.beta-muted .text-gray-900 { color: var(--color-gray-900); }
  html.beta-muted .text-gray-700 { color: var(--color-gray-700); }
  html.beta-muted .text-gray-600 { color: var(--color-gray-600); }
  html.beta-muted .text-gray-500 { color: var(--color-gray-500); }
  html.beta-muted .border-gray-300 { border-color: var(--color-gray-300); }
  html.beta-muted .border-gray-200 { border-color: var(--color-gray-200); }
}

/* UI Improvement #8: Hover state color transitions (200ms) */
@layer base {
  html.beta-transitions button,
  html.beta-transitions a,
  html.beta-transitions input,
  html.beta-transitions select,
  html.beta-transitions textarea,
  html.beta-transitions .hover\:bg-gray-50:hover,
  html.beta-transitions .hover\:bg-gray-100:hover,
  html.beta-transitions .hover\:bg-blue-50:hover,
  html.beta-transitions .hover\:bg-red-50:hover,
  html.beta-transitions .hover\:shadow-md:hover {
    @apply transition-all duration-200 ease-in-out;
  }
  
  /* Transition-colors already handled by the general rule above */
  
  html.beta-transitions .hover\:scale-105:hover {
    transform: scale(1.05);
    transition: transform 200ms ease-in-out;
  }
}

/* UI Improvement #9: Focus states with subtle glow effects */
@layer base {
  html.beta-focus-glow input:focus,
  html.beta-focus-glow select:focus,
  html.beta-focus-glow textarea:focus,
  html.beta-focus-glow button:focus,
  html.beta-focus-glow a:focus {
    @apply outline-none ring-2 ring-blue-400 ring-opacity-50;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  }
  
  html.beta-focus-glow .focus\:ring-2:focus {
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  }
  
  html.beta-focus-glow button:focus-visible,
  html.beta-focus-glow a:focus-visible {
    @apply outline-none ring-2 ring-blue-400 ring-opacity-50;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15), 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  }
}

/* UI Improvement #10: Desaturated success/error colors */
@layer base {
  html.beta-desat-alerts {
    --color-success-bg: #d1fae5;   /* emerald-100 */
    --color-success-tx: #065f46;   /* emerald-800 */
    --color-error-bg: #fee2e2;     /* red-100 */
    --color-error-tx: #7f1d1d;     /* red-800 */
  }
  
  html.beta-desat-alerts .alert-success { 
    background: var(--color-success-bg); 
    color: var(--color-success-tx);
  }
  
  html.beta-desat-alerts .alert-error { 
    background: var(--color-error-bg); 
    color: var(--color-error-tx);
  }
  
  /* Apply to Tailwind utility classes */
  html.beta-desat-alerts .bg-green-50 { background-color: var(--color-success-bg); }
  html.beta-desat-alerts .bg-red-50 { background-color: var(--color-error-bg); }
  html.beta-desat-alerts .text-green-600 { color: var(--color-success-tx); }
  html.beta-desat-alerts .text-red-600 { color: var(--color-error-tx); }
  html.beta-desat-alerts .border-green-300 { border-color: #a7f3d0; }
  html.beta-desat-alerts .border-red-300 { border-color: #fecaca; }
}

/* UI Improvement #11: Input padding 16px */
@layer base {
  html.beta-input-pad input:not([type=checkbox]):not([type=radio]),
  html.beta-input-pad textarea,
  html.beta-input-pad select {
    @apply py-4;
  }
}

/* UI Improvement #12: 8px baseline grid */
@layer base {
  html.beta-8grid {
    --space-1: 0.5rem;   /* 8px */
    --space-2: 1rem;     /* 16px */
    --space-3: 1.5rem;   /* 24px */
    --space-4: 2rem;     /* 32px */
    --space-5: 2.5rem;   /* 40px */
    --space-6: 3rem;     /* 48px */
  }
  
  html.beta-8grid .g-mt-1 { margin-top: var(--space-1); }
  html.beta-8grid .g-mt-2 { margin-top: var(--space-2); }
  html.beta-8grid .g-mt-3 { margin-top: var(--space-3); }
  html.beta-8grid .g-mt-4 { margin-top: var(--space-4); }
  
  html.beta-8grid .g-mb-1 { margin-bottom: var(--space-1); }
  html.beta-8grid .g-mb-2 { margin-bottom: var(--space-2); }
  html.beta-8grid .g-mb-3 { margin-bottom: var(--space-3); }
  html.beta-8grid .g-mb-4 { margin-bottom: var(--space-4); }
  
  html.beta-8grid .g-gap-1 { gap: var(--space-1); }
  html.beta-8grid .g-gap-2 { gap: var(--space-2); }
  html.beta-8grid .g-gap-3 { gap: var(--space-3); }
  html.beta-8grid .g-gap-4 { gap: var(--space-4); }
  
  html.beta-8grid .g-p-1 { padding: var(--space-1); }
  html.beta-8grid .g-p-2 { padding: var(--space-2); }
  html.beta-8grid .g-p-3 { padding: var(--space-3); }
  html.beta-8grid .g-p-4 { padding: var(--space-4); }
}